process Rec = {
  untracked PSet maxEvents = {untracked int32 input = 200}

  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  include "CondCore/DBCommon/data/CondDBSetup.cfi"
  replace MessageLogger.cerr.default.limit = 10


#
### input
#
source = PoolSource {

  untracked vstring fileNames = {
    '/store/data/CRUZET3/Cosmics/RAW/v4/000/050/908/04D61810-DD54-DD11-8FB1-001617DBD230.root'
  }
  untracked uint32 firstFreeID = 131072
}

### output module
#
include "Configuration/EventContent/data/EventContentCosmics.cff"
 
  module FEVT = PoolOutputModule {
    untracked string fileName = 'reco.root'
    using FEVTEventContent

    untracked PSet dataset =
    {
      untracked string dataTier = "RECO"
    }
   }

replace FEVT.outputCommands +="keep CaloTowersSorted_calotoweroptmaker_*_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCALCTDigiMuonDigiCollection_muonCSCDigis_MuonCSCALCTDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCCLCTDigiMuonDigiCollection_muonCSCDigis_MuonCSCCLCTDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCComparatorDigiMuonDigiCollection_muonCSCDigis_MuonCSCComparatorDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCCorrelatedLCTDigiMuonDigiCollection_csctfDigis_*_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCCorrelatedLCTDigiMuonDigiCollection_muonCSCDigis_MuonCSCCorrelatedLCTDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCRPCDigiMuonDigiCollection_muonCSCDigis_MuonCSCRPCDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCStripDigiMuonDigiCollection_muonCSCDigis_MuonCSCStripDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCWireDigiMuonDigiCollection_muonCSCDigis_MuonCSCWireDigi_*"
replace FEVT.outputCommands +="keep cscL1TrackCSCDetIdCSCCorrelatedLCTDigiMuonDigiCollectionstdpairs_csctfDigis_*_*"
replace FEVT.outputCommands +="keep DTChamberIdDTLocalTriggerMuonDigiCollection_muonDTDigis_*_*"
replace FEVT.outputCommands +="keep DTLayerIdDTDigiMuonDigiCollection_muonDTDigis_*_*"
replace FEVT.outputCommands +="keep intL1CSCSPStatusDigisstdpair_csctfDigis_*_*"
replace FEVT.outputCommands +="keep L1MuDTChambPhContainer_dttfDigis_*_*"
replace FEVT.outputCommands +="keep L1MuDTChambThContainer_dttfDigis_*_*"
replace FEVT.outputCommands +="keep L1MuDTTrackContainer_dttfDigis_DATA_*"
replace FEVT.outputCommands +="keep PixelDigiedmDetSetVector_siPixelDigis_*_*"
replace FEVT.outputCommands +="keep recoCandidatesOwned_caloTowersOpt_*_*"
replace FEVT.outputCommands +="keep RPCDetIdRPCDigiMuonDigiCollection_muonRPCDigis_*_*"


   untracked PSet configurationMetadata =
   {
    untracked string version = "$Revision: 1.36 $"
    untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/Configuration/GlobalRuns/data/recoT0DQM_EvContent.cfg,v $"
    untracked string annotation = "CRUZET Prompt Reco with DQM"
   }


   untracked PSet options = {
        untracked bool wantSummary = true  # default is false
     }


### Conditions (Global Tag is used here):
include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
#replace GlobalTag.connect  ="sqlite_file:/afs/cern.ch/user/m/malgeri/public/globtag/CRUZET3.db"
replace GlobalTag.globaltag = "CRUZET3_V5::All"
es_prefer GlobalTag = PoolDBESSource {}

### Magnetic fiuld: force mag field to be 0.0 tesla
include "Configuration/StandardSequences/data/MagneticField.cff"
include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
include "Configuration/StandardSequences/data/Geometry.cff"

## reconstruction sequence for Global Run
include "Configuration/StandardSequences/data/ReconstructionCosmics.cff"

## Real data raw to digi
include "Configuration/StandardSequences/data/RawToDigi_Data.cff"

## offline DQM

include "DQMOffline/Configuration/data/DQMOffline.cff"
include "DQMServices/Components/data/MEtoEDMConverter.cff"
include "L1Trigger/HardwareValidation/data/L1HardwareValidation.cff"

include "L1Trigger/Configuration/data/L1Config.cff"
include "L1TriggerConfig/CSCTFConfigProducers/data/CSCTFConfigProducer.cfi"
include "L1TriggerConfig/CSCTFConfigProducers/data/L1MuCSCTFConfigurationRcdSrc.cfi"

#
## add quality info for Si Strip
#
include "CalibTracker/SiStripESProducers/data/SiStripQualityESProducer.cfi"
  replace siStripQualityESProducer.ListOfRecordToMerge = {
     { string record = "SiStripDetCablingRcd" string tag = "" },
     { string record = "SiStripBadChannelRcd" string tag = "" },
     { string record = "SiStripBadFiberRcd"   string tag = ""}
  }
  replace siStripQualityESProducer.ReduceGranularity = true
  replace siStripQualityESProducer.ThresholdForReducedGranularity  =  0.2 

  es_prefer siStripQualityESProducer = SiStripQualityESProducer{}

# change seed pt cut
  replace cosmicseedfinderP5.SeedPt = 5
  replace combinatorialcosmicseedfinderP5.SeedMomentum = 5

# temp fix because of bad name in cfi. fixed in 21X
  sequence muonTrackAnalyzers = {muonTrackCosmicAnalyzers}

#path with everythin in
  #path allPath = {  RawToDigi , reconstructionCosmics , L1HardwareValidation, DQMOffline_noHLT, MEtoEDMConverter}
  path allPath = {  RawToDigi_woGCT , reconstructionCosmics , DQMOffline_noHLT, MEtoEDMConverter}

  endpath outpath = {FEVT}
}
