process Rec = {
  untracked PSet maxEvents = {untracked int32 input = 10}

  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  include "CondCore/DBCommon/data/CondDBSetup.cfi"
  replace MessageLogger.cerr.default.limit = 10


#
### input
#
source = PoolSource {

     untracked vstring fileNames = {
'file:/build1/rahatlou/cruzet3-2010/src/raw_000_050_658_28E1D7F9-214C-DD11-B42C-000423D9880C.root'
#'/store/data/CRUZET2/Cosmics/RAW/v1/000/046/549/28581B1A-B137-DD11-B2B7-000423D9870C.root',
#'/store/data/CRUZET2/Cosmics/RAW/v1/000/046/549/409C7C75-B137-DD11-ABA6-000423D9880C.root',
#'/store/data/CRUZET2/Cosmics/RAW/v1/000/046/549/8CB01268-B437-DD11-8FF6-000423D6B358.root'

}

       untracked uint32 firstFreeID = 131072
}

### output module
#
include "Configuration/EventContent/data/EventContentCosmics.cff"
 
  module FEVT = PoolOutputModule {
    untracked string fileName = 'reco.root'
    using FEVTEventContent

    untracked PSet dataset =
    {
      untracked string dataTier = "RECO"
    }
   }
#wanna keep raw?
replace FEVT.outputCommands +="keep FEDRawDataCollection_source__*"


replace FEVT.outputCommands +="keep CaloTowersSorted_calotoweroptmaker_*_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCALCTDigiMuonDigiCollection_muonCSCDigis_MuonCSCALCTDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCCLCTDigiMuonDigiCollection_muonCSCDigis_MuonCSCCLCTDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCComparatorDigiMuonDigiCollection_muonCSCDigis_MuonCSCComparatorDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCCorrelatedLCTDigiMuonDigiCollection_csctfDigis_*_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCCorrelatedLCTDigiMuonDigiCollection_muonCSCDigis_MuonCSCCorrelatedLCTDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCRPCDigiMuonDigiCollection_muonCSCDigis_MuonCSCRPCDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCStripDigiMuonDigiCollection_muonCSCDigis_MuonCSCStripDigi_*"
replace FEVT.outputCommands +="keep CSCDetIdCSCWireDigiMuonDigiCollection_muonCSCDigis_MuonCSCWireDigi_*"
replace FEVT.outputCommands +="keep cscL1TrackCSCDetIdCSCCorrelatedLCTDigiMuonDigiCollectionstdpairs_csctfDigis_*_*"
replace FEVT.outputCommands +="keep DTChamberIdDTLocalTriggerMuonDigiCollection_muonDTDigis_*_*"
replace FEVT.outputCommands +="keep DTLayerIdDTDigiMuonDigiCollection_muonDTDigis_*_*"
replace FEVT.outputCommands +="keep intL1CSCSPStatusDigisstdpair_csctfDigis_*_*"
replace FEVT.outputCommands +="keep L1MuDTChambPhContainer_dttfDigis_*_*"
replace FEVT.outputCommands +="keep L1MuDTChambThContainer_dttfDigis_*_*"
replace FEVT.outputCommands +="keep L1MuDTTrackContainer_dttfDigis_DATA_*"
replace FEVT.outputCommands +="keep PixelDigiedmDetSetVector_siPixelDigis_*_*"
replace FEVT.outputCommands +="keep recoCandidatesOwned_caloTowersOpt_*_*"
replace FEVT.outputCommands +="keep RPCDetIdRPCDigiMuonDigiCollection_muonRPCDigis_*_*"


   untracked PSet configurationMetadata =
   {
    untracked string version = "$Revision: 1.28 $"
    untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/Configuration/GlobalRuns/data/recoT0DQM_EvContent.cfg,v $"
    untracked string annotation = "CRUZET Prompt Reco with DQM"
   }


   untracked PSet options = {
        untracked bool wantSummary = true  # default is false
     }


### Conditions (Global Tag is used here):
include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
#replace GlobalTag.connect  ="sqlite_file:/afs/cern.ch/user/m/malgeri/public/globtag/CRUZET3.db"
replace GlobalTag.globaltag = "CRUZET3_V1P::All"
es_prefer GlobalTag = PoolDBESSource {}

### Magnetic fiuld: force mag field to be 0.0 tesla
include "Configuration/StandardSequences/data/MagneticField.cff"
include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
include "Configuration/StandardSequences/data/Geometry.cff"

## reconstruction sequence for Global Run
include "Configuration/StandardSequences/data/ReconstructionCosmics.cff"

## Real data raw to digi
include "Configuration/StandardSequences/data/RawToDigi_Data.cff"

## offline DQM

include "DQMServices/Components/data/MEtoEDMConverter.cff"
include "L1Trigger/HardwareValidation/data/L1HardwareValidation.cff"

include "L1Trigger/Configuration/data/L1Config.cff"
include "L1TriggerConfig/CSCTFConfigProducers/data/CSCTFConfigProducer.cfi"
include "L1TriggerConfig/CSCTFConfigProducers/data/L1MuCSCTFConfigurationRcdSrc.cfi"

sequence muonTrackAnalyzers = {muonTrackCosmicAnalyzers}
include "DQMOffline/Muon/data/muonCosmicMonitors.cff"
include "DQM/SiStripMonitorClient/data/SiStripSourceConfigTier0.cff"
include "DQM/HcalMonitorModule/data/hcal_dqm_source-fileT0.cff"
include "DQMOffline/JetMET/data/jetMETAnalyzer.cff"
include "DQM/SiPixelCommon/data/SiPixelOfflineDQM_source.cff"
include "DQMOffline/Trigger/data/FourVectorHLTOffline.cfi"
include "DQMOffline/Trigger/data/L1TMonitor_dqmoffline.cff"
include "DQM/EcalBarrelMonitorModule/data/EcalBarrelMonitorModule.cfi"

     replace ecalBarrelMonitorModule.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelMonitorModule.EBDigiCollection = ecalDigis:ebDigis
     replace ecalBarrelMonitorModule.EcalTrigPrimDigiCollection = ecalDigis:EcalTriggerPrimitives

     replace ecalBarrelMonitorModule.verbose = false

include "DQM/EcalBarrelMonitorTasks/data/EcalBarrelMonitorTasks.cfi"

     replace ecalBarrelCosmicTask.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelCosmicTask.EcalUncalibratedRecHitCollection = ecalWeightUncalibRecHit:EcalUncalibRecHitsEB

     replace ecalBarrelIntegrityTask.EBDetIdCollection0 = ecalDigis:EcalIntegrityDCCSizeErrors
     replace ecalBarrelIntegrityTask.EBDetIdCollection1 = ecalDigis:EcalIntegrityGainErrors
     replace ecalBarrelIntegrityTask.EBDetIdCollection2 = ecalDigis:EcalIntegrityChIdErrors
     replace ecalBarrelIntegrityTask.EBDetIdCollection3 = ecalDigis:EcalIntegrityGainSwitchErrors
     replace ecalBarrelIntegrityTask.EcalElectronicsIdCollection1 = ecalDigis:EcalIntegrityTTIdErrors
     replace ecalBarrelIntegrityTask.EcalElectronicsIdCollection2 = ecalDigis:EcalIntegrityBlockSizeErrors
     replace ecalBarrelIntegrityTask.EcalElectronicsIdCollection3 = ecalDigis:EcalIntegrityMemTtIdErrors
     replace ecalBarrelIntegrityTask.EcalElectronicsIdCollection4 = ecalDigis:EcalIntegrityMemBlockSizeErrors
     replace ecalBarrelIntegrityTask.EcalElectronicsIdCollection5 = ecalDigis:EcalIntegrityMemChIdErrors
     replace ecalBarrelIntegrityTask.EcalElectronicsIdCollection6 = ecalDigis:EcalIntegrityMemGainErrors

     replace ecalBarrelLaserTask.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelLaserTask.EBDigiCollection = ecalDigis:ebDigis
     replace ecalBarrelLaserTask.EcalPnDiodeDigiCollection = ecalDigis:
     replace ecalBarrelLaserTask.EcalUncalibratedRecHitCollection = ecalWeightUncalibRecHit:EcalUncalibRecHitsEB

     replace ecalBarrelOccupancyTask.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelOccupancyTask.EBDigiCollection = ecalDigis:ebDigis
     replace ecalBarrelOccupancyTask.EcalPnDiodeDigiCollection = ecalDigis:
     replace ecalBarrelOccupancyTask.EcalTrigPrimDigiCollection = ecalDigis:EcalTriggerPrimitives

     replace ecalBarrelPedestalOnlineTask.EBDigiCollection = ecalDigis:ebDigis

     replace ecalBarrelPedestalTask.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelPedestalTask.EBDigiCollection = ecalDigis:ebDigis
     replace ecalBarrelPedestalTask.EcalPnDiodeDigiCollection = ecalDigis:

     replace ecalBarrelStatusFlagsTask.EcalRawDataCollection = ecalDigis:

     replace ecalBarrelTestPulseTask.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelTestPulseTask.EBDigiCollection = ecalDigis:ebDigis
     replace ecalBarrelTestPulseTask.EcalPnDiodeDigiCollection = ecalDigis:
     replace ecalBarrelTestPulseTask.EcalUncalibratedRecHitCollection = ecalWeightUncalibRecHit:EcalUncalibRecHitsEB

     replace ecalBarrelTimingTask.EcalRawDataCollection = ecalDigis:
     replace ecalBarrelTimingTask.EcalUncalibratedRecHitCollection = ecalFixedAlphaBetaFitUncalibRecHit:EcalUncalibRecHitsEB

     replace ecalBarrelTriggerTowerTask.EcalTrigPrimDigiCollectionReal = ecalDigis:EcalTriggerPrimitives
     replace ecalBarrelTriggerTowerTask.EcalTrigPrimDigiCollectionEmul = valEcalTriggerPrimitiveDigis

     replace ecalBarrelClusterTask.BasicClusterCollection = cosmicBasicClusters:CosmicBarrelBasicClusters

     module dqmInfoEB = DQMEventInfo{
       untracked string subSystemFolder = "EcalBarrel"
     }


     sequence ecal_dqm_source_offline7 = { ecalBarrelMonitorModule,
                                           dqmInfoEB,
                                           ecalBarrelOccupancyTask,
                                           ecalBarrelIntegrityTask,
                                           ecalBarrelStatusFlagsTask,
                                           ecalBarrelPedestalOnlineTask,
                                           ecalBarrelTriggerTowerTask,
                                           ecalBarrelCosmicTask,
                                           ecalBarrelClusterTask
                                         }



    path allPath = {  RawToDigi , reconstructionCosmics , L1HardwareValidation, SiStripDQMTier0,ecal_dqm_source_offline7,muonCosmicMonitors,jetMETAnalyzer,hcalOfflineDQMSource,siPixelOfflineDQM_source, l1tgt, l1tgmt, l1trpctf, l1tcsctf, l1trct, l1tgct, hltResults, MEtoEDMConverter}

    endpath outpath = {FEVT}
}
