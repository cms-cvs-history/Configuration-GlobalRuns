process SKIM = {
    source = PoolSource { 
	untracked vstring fileNames = {
           '/store/data/CRUZET3/Cosmics/RAW/v4/000/050/908/04D61810-DD54-DD11-8FB1-001617DBD230.root'
	}
    }

    untracked PSet maxEvents = {untracked int32 input = -1}

   untracked PSet configurationMetadata =
   {
    untracked string version = "$Revision: 1.3 $"
    untracked string name = "$Source: /cvs_server/repositories/CMSSW/CMSSW/Configuration/GlobalRuns/data/PointingDoubleMultiSkim.cfg,v $"
    untracked string annotation = "PointingDoubleMultiSkim"
   }

### Conditions (Global Tag is used here):
### Magnetic fiuld: force mag field to be 0.0 tesla
include "Configuration/StandardSequences/data/MagneticField.cff"
include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
include "Configuration/StandardSequences/data/Geometry.cff"
include "Configuration/StandardSequences/data/ReconstructionCosmics.cff"
include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
replace GlobalTag.globaltag = "CRUZET3_V5::All"
es_prefer GlobalTag = PoolDBESSource {}

   untracked PSet options = { untracked bool wantSummary = true }

    module out = PoolOutputModule {
	untracked string fileName = "trackerPointing.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"cosmicMuonsBarrelOnlyTkPath","cosmictrackfinderP5TkCntPath","ctfWithMaterialTracksP5TkCntPath","rsWithMaterialTracksP5TkCntPath"}
	} 
        untracked PSet dataset =
        {
            untracked string dataTier = "RECO"
	    untracked string filterName = "cosmicMuonsBarrelOnly"
        }
    }

module cosmicMuonsBarrelOnlyTkFilter = HLTMuonPointingFilter {
   string SALabel = "cosmicMuonsBarrelOnly"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 90.0
   double maxZ = 130.0
 }


  module cosmictrackfinderP5TkCntFilter  = TrackCountFilter {
   InputTag src = cosmictrackfinderP5
   uint32 minNumber = 1
 }

  module ctfWithMaterialTracksP5TkCntFilter  = TrackCountFilter {
   InputTag src = ctfWithMaterialTracksP5
   uint32 minNumber = 1
 }

  module rsWithMaterialTracksP5TkCntFilter  = TrackCountFilter {
   InputTag src = rsWithMaterialTracksP5
   uint32 minNumber = 1
 }
 
path cosmicMuonsBarrelOnlyTkPath = {cosmicMuonsBarrelOnlyTkFilter}
path cosmictrackfinderP5TkCntPath = {cosmictrackfinderP5TkCntFilter}
path ctfWithMaterialTracksP5TkCntPath = {ctfWithMaterialTracksP5TkCntFilter}
path rsWithMaterialTracksP5TkCntPath = {rsWithMaterialTracksP5TkCntFilter}




    module out3 = PoolOutputModule {
	untracked string fileName = "multiMuon.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"multiCosmicMuonPath","multiLHCMuonPath"}
	} 
        untracked PSet dataset =
        {
            untracked string dataTier = "RECO"
	    untracked string filterName = "multiCosmicMuon"
        }
    }



  module multiCosmicMuonFilter  = TrackCountFilter {
   InputTag src = cosmicMuonsBarrelOnly
   uint32 minNumber = 5
 }

  module multiLHCMuonFilter  = TrackCountFilter {
   InputTag src = lhcStandAloneMuonsBarrelOnly
   uint32 minNumber = 5
 }


path multiCosmicMuonPath = {multiCosmicMuonFilter}
path multiLHCMuonPath = {multiLHCMuonFilter}


    module out4 = PoolOutputModule {
	untracked string fileName = "doubleMuon.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"doubleMuonPath"}
	} 
        untracked PSet dataset =
        {
            untracked string dataTier = "RECO"
	    untracked string filterName = "doubleMuon"
        }
    }

  module doubleMuonFilter  = TrackCountFilter {
   InputTag src = cosmicMuonsBarrelOnly
   uint32 minNumber = 2
 }

path doubleMuonPath = {doubleMuonFilter}

    endpath o = { out,out3,out4 }

}
