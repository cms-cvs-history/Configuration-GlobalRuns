process SKIM = {
    source = PoolSource { 
	untracked vstring fileNames = {
           '/store/data/CRUZET3/Cosmics/RECO/CRUZET3_V2P_v3/0060/226F5F00-3451-DD11-9688-000423D9853C.root'
	}
    }

    untracked PSet maxEvents = {untracked int32 input = -1}


### Conditions (Global Tag is used here):
### Magnetic fiuld: force mag field to be 0.0 tesla
include "Configuration/StandardSequences/data/MagneticField.cff"
include "Configuration/GlobalRuns/data/ForceZeroTeslaField.cff"
include "Configuration/StandardSequences/data/Geometry.cff"
include "Configuration/StandardSequences/data/ReconstructionCosmics.cff"
include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
replace GlobalTag.globaltag = "CRUZET3_V2P::All"
es_prefer GlobalTag = PoolDBESSource {}



   untracked PSet options = { untracked bool wantSummary = true }

    module out = PoolOutputModule {
	untracked string fileName = "trackerPointing.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"cosmicMuonsBarrelOnlyTkPath","cosmictrackfinderP5TkCntPath","ctfWithMaterialTracksP5TkCntPath","rsWithMaterialTracksP5TkCntPath"}
	} 
    }

module cosmicMuonsBarrelOnlyTkFilter = HLTMuonPointingFilter {
   string SALabel = "cosmicMuonsBarrelOnly"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 90.0
   double maxZ = 130.0
 }


  module cosmictrackfinderP5TkCntFilter  = TrackCountFilter {
   InputTag src = cosmictrackfinderP5
   uint32 minNumber = 1
 }

  module ctfWithMaterialTracksP5TkCntFilter  = TrackCountFilter {
   InputTag src = ctfWithMaterialTracksP5
   uint32 minNumber = 1
 }

  module rsWithMaterialTracksP5TkCntFilter  = TrackCountFilter {
   InputTag src = rsWithMaterialTracksP5
   uint32 minNumber = 1
 }
 
path cosmicMuonsBarrelOnlyTkPath = {cosmicMuonsBarrelOnlyTkFilter}
path cosmictrackfinderP5TkCntPath = {cosmictrackfinderP5TkCntFilter}
path ctfWithMaterialTracksP5TkCntPath = {ctfWithMaterialTracksP5TkCntFilter}
path rsWithMaterialTracksP5TkCntPath = {rsWithMaterialTracksP5TkCntFilter}




    module out2 = PoolOutputModule {
	untracked string fileName = "superPointing.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"cosmicMuonsBarrelOnlyPath","cosmicMuonsPath","cosmicMuons1LegBarrelOnlyPath","globalCosmicMuonsBarrelOnlyPath","cosmictrackfinderP5Path","globalCosmicMuonsPath","rsWithMaterialTracksP5Path","globalCosmicMuons1LegBarrelOnlyPath","ctfWithMaterialTracksP5Path"}
	} 
    }

module cosmicMuonsBarrelOnlyFilter = HLTMuonPointingFilter {
   string SALabel = "cosmicMuonsBarrelOnly"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module cosmicMuonsFilter = HLTMuonPointingFilter {
   string SALabel = "cosmicMuons"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module cosmicMuons1LegBarrelOnlyFilter = HLTMuonPointingFilter {
   string SALabel = "cosmicMuons1LegBarrelOnly"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }


module globalCosmicMuonsBarrelOnlyFilter = HLTMuonPointingFilter {
   string SALabel = "globalCosmicMuonsBarrelOnly"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module cosmictrackfinderP5Filter = HLTMuonPointingFilter {
   string SALabel = "cosmictrackfinderP5"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module globalCosmicMuonsFilter = HLTMuonPointingFilter {
   string SALabel = "globalCosmicMuons"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module rsWithMaterialTracksP5Filter = HLTMuonPointingFilter {
   string SALabel = "rsWithMaterialTracksP5"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module globalCosmicMuons1LegBarrelOnlyFilter = HLTMuonPointingFilter {
   string SALabel = "globalCosmicMuons1LegBarrelOnly"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }

module ctfWithMaterialTracksP5Filter = HLTMuonPointingFilter {
   string SALabel = "ctfWithMaterialTracksP5"
   string PropagatorName = "SteppingHelixPropagatorAny"
   double radius = 10.0
   double maxZ = 20.0
 }


path cosmicMuonsBarrelOnlyPath = {cosmicMuonsBarrelOnlyFilter}
path cosmicMuonsPath = {cosmicMuonsFilter}
path cosmicMuons1LegBarrelOnlyPath = {cosmicMuons1LegBarrelOnlyFilter}
path globalCosmicMuonsBarrelOnlyPath = {globalCosmicMuonsBarrelOnlyFilter}
path cosmictrackfinderP5Path = {cosmictrackfinderP5Filter}
path globalCosmicMuonsPath = {globalCosmicMuonsFilter}
path rsWithMaterialTracksP5Path = {rsWithMaterialTracksP5Filter}
path globalCosmicMuons1LegBarrelOnlyPath = {globalCosmicMuons1LegBarrelOnlyFilter}
path ctfWithMaterialTracksP5Path = {ctfWithMaterialTracksP5Filter}
 

    module out3 = PoolOutputModule {
	untracked string fileName = "multiMuon.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"multiCosmicMuonPath","multiLHCMuonPath"}
	} 
    }



  module multiCosmicMuonFilter  = TrackCountFilter {
   InputTag src = cosmicMuonsBarrelOnly
   uint32 minNumber = 5
 }

  module multiLHCMuonFilter  = TrackCountFilter {
   InputTag src = lhcStandAloneMuonsBarrelOnly
   uint32 minNumber = 5
 }


path multiCosmicMuonPath = {multiCosmicMuonFilter}
path multiLHCMuonPath = {multiLHCMuonFilter}


    module out4 = PoolOutputModule {
	untracked string fileName = "doubleMuon.root"
	untracked PSet SelectEvents = { 
	    vstring SelectEvents = {"doubleMuonPath"}
	} 
    }



  module doubleMuonFilter  = TrackCountFilter {
   InputTag src = cosmicMuonsBarrelOnly
   uint32 minNumber = 2
 }

path doubleMuonPath = {doubleMuonFilter}

    endpath o = { out,out2,out3,out4 }

}
